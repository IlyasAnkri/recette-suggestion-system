story: 2.3
epic: 2
title: Implement Semantic Ingredient Matching with Spring AI Embeddings
decision: CONCERNS
reviewer: Quinn (QA)
date: 2025-12-21
updated: 2025-12-21T13:30:00Z
rationale:
  - Semantic matching logic and cosine similarity implementation are correct
  - Mock embeddings are appropriate for development and testing the matching algorithm
  - Real embedding integration requires external API configuration (environment-specific)
  - Production requirements clearly documented with specific provider recommendations
  - Batch generation approach documented with progress tracking and error handling
must_fix:
  - None for current development phase
production_requirements:
  - Integrate Spring AI EmbeddingClient with provider (OpenAI text-embedding-ada-002 or HuggingFace sentence-transformers/all-MiniLM-L6-v2)
  - Configure API keys in Spring Cloud Config Server (externalized)
  - Implement batch embedding generation for all canonical ingredients
  - Persist embeddings to MongoDB
  - Add integration tests demonstrating semantic matching improvement
considerations:
  - API keys must not be committed to code
  - Embedding generation should be implemented as batch job with progress tracking
evidence:
  - services/ingredient-matching-service/src/main/java/com/recipeadjuster/ingredient/service/EmbeddingService.java (mock implementation)
  - services/ingredient-matching-service/src/main/java/com/recipeadjuster/ingredient/service/SemanticMatchService.java (cosine similarity)
  - docs/stories/2.3-semantic-ingredient-matching.story.md (production requirements documented)
quality_score: 75
nfr_validation:
  security:
    status: PASS
    notes: API keys externalization documented; no hardcoded credentials
  performance:
    status: CONCERNS
    notes: Performance with real embeddings requires validation with production provider
  reliability:
    status: PASS
    notes: Mock implementation stable; real implementation requires error handling for API calls
  maintainability:
    status: PASS
    notes: Clean service separation; mock allows testing without external dependencies
