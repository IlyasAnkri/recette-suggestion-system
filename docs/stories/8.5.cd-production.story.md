# Story 8.5: Create GitHub Actions CD Pipeline for Production

## Status: Draft

## Story
**As a** DevOps engineer,  
**I want** automated deployment to production,  
**so that** releases are consistent and reliable.

## Acceptance Criteria
1. Workflow `.github/workflows/deploy-production.yml` created
2. Triggers on push to main branch after CI passes
3. Backend deployment via Render.com API
4. Frontend deployment via Netlify API
5. Smoke tests run after deployment
6. Slack notification on success/failure

## Tasks / Subtasks
- [ ] Task 1: Create workflow (AC: 1)
  - [ ] Create deploy-production.yml

- [ ] Task 2: Configure triggers (AC: 2)
  - [ ] On push to main
  - [ ] After CI workflow completes

- [ ] Task 3: Deploy backend (AC: 3)
  - [ ] Trigger Render deploy hooks
  - [ ] Wait for deployment

- [ ] Task 4: Deploy frontend (AC: 4)
  - [ ] Trigger Netlify build hook
  - [ ] Wait for deployment

- [ ] Task 5: Run smoke tests (AC: 5)
  - [ ] Health check endpoints
  - [ ] Critical API endpoints

- [ ] Task 6: Send notifications (AC: 6)
  - [ ] Slack webhook
  - [ ] Success/failure message

## Dev Notes

### Deploy Hook Example
```yaml
- name: Deploy to Render
  run: |
    curl -X POST ${{ secrets.RENDER_DEPLOY_HOOK_URL }}
```

### Smoke Test
```yaml
- name: Smoke Test
  run: |
    curl -f https://api.recipe-adjuster.com/actuator/health
    curl -f https://recipe-adjuster.netlify.app
```

## Testing

### Test Cases
1. Deployment triggers on main push
2. Backend deploys to Render
3. Frontend deploys to Netlify
4. Slack notification received

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-20 | 1.0 | Initial story creation | Bob (SM) |
