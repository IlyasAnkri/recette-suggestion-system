# Story 5.6: Build User Authentication and Profile Management

## Status: Deferred

## Story
**As a** user,  
**I want** to login and manage my profile,  
**so that** my preferences persist across sessions.

## Acceptance Criteria
1. Login/register forms with validation
2. OAuth2 social login buttons (Google, GitHub)
3. JWT token storage with expiry check
4. HTTP interceptor attaches Authorization header
5. Profile page (display name, avatar, preferences)
6. "Continue as Guest" button

## Tasks / Subtasks
- [ ] Task 1: Create auth forms (AC: 1)
  - [ ] Login form (email, password)
  - [ ] Register form (email, password, name)
  - [ ] Form validation

- [ ] Task 2: Add OAuth2 buttons (AC: 2)
  - [ ] Google login button
  - [ ] GitHub login button
  - [ ] Handle OAuth2 redirect

- [ ] Task 3: JWT token handling (AC: 3)
  - [ ] Store token in localStorage
  - [ ] Check expiry before use
  - [ ] Refresh token when needed

- [ ] Task 4: Create HTTP interceptor (AC: 4)
  - [ ] Add Authorization header
  - [ ] Handle 401 responses
  - [ ] Trigger refresh flow

- [ ] Task 5: Create profile page (AC: 5)
  - [ ] Display user info
  - [ ] Edit preferences form
  - [ ] Avatar upload/change

- [ ] Task 6: Guest mode (AC: 6)
  - [ ] "Continue as Guest" button
  - [ ] Limited functionality notice

## Dev Notes

### File Locations
- Auth: `frontend/src/app/features/auth/`
- Profile: `frontend/src/app/features/profile/`
- Interceptor: `frontend/src/app/core/interceptors/`

## Testing

### Test Cases
1. Login with valid credentials works
2. Invalid credentials show error
3. Token attached to API requests
4. Profile updates persist

## Dev Agent Record

### Agent Model Used
Cascade (Claude 3.7 Sonnet)

### Completion Notes
- Story deferred to Phase 2 - requires backend OAuth2 integration
- Placeholder auth routes created
- Guest mode already functional via existing navigation
- Full implementation requires backend user service (Story 4.x)

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-20 | 1.0 | Initial story creation | Bob (SM) |
| 2025-12-21 | 1.1 | Deferred to Phase 2 | James (Dev) |
 
 ## QA Results
 
 ### Review Date: 2025-12-21
 
 ### Reviewed By: Quinn (Test Architect)
 
 ### Code Quality Assessment
 
 - Story explicitly deferred to Phase 2; no implementation to assess in this phase.
 - Placeholder routing and guest mode are sufficient for current frontend scope.
 
 ### Refactoring Performed
 
 - None (no implementation in this phase).
 
 ### Compliance Check
 
 - Coding Standards: n/a for this phase.
 - Project Structure: n/a for this phase.
 - Testing Strategy: n/a for this phase.
 - All ACs Met: ✗ (by design, deferred)
 
 ### Improvements Checklist
 
 - [ ] Revisit this story once backend auth/OAuth2 services are available.
 - [ ] Ensure security and test strategy are co-designed with backend team.
 
 ### Security Review
 
 - Auth-critical; must undergo a dedicated security review when implemented.
 
 ### Performance Considerations
 
 - Not applicable in current phase.
 
 ### Files Modified During Review
 
 - None.
 
 ### Gate Status
 
 - Gate: WAIVED → docs/qa/gates/5.6-user-auth-profile.yml
 
 ### Recommended Status
 
 - Story remains Deferred; no change.
